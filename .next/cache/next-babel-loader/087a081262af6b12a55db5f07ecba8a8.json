{"ast":null,"code":"import { q, client } from '../../utils/db';\n\nconst getAllContacts = () => {\n  return client.query(q.Map(q.Paginate(q.Match('allContacts'), {\n    size: 1\n  }), q.Lambda(x => q.Get(x))));\n};\n\nconst createContact = data => {\n  return client.query(q.Create(q.Collection('contacts'), {\n    data\n  }));\n};\n\nexport default async function handler(req, res) {\n  if (req.method === 'POST') {\n    const contact = await createContact(req.body);\n    res.send(contact);\n  } else {\n    const contacts = await getAllContacts();\n    res.json(contacts);\n  }\n}","map":{"version":3,"sources":["C:/meusprojetos/fauna-db-poc/pages/api/contacts.js"],"names":["q","client","getAllContacts","query","Map","Paginate","Match","size","Lambda","x","Get","createContact","data","Create","Collection","handler","req","res","method","contact","body","send","contacts","json"],"mappings":"AAAA,SAASA,CAAT,EAAYC,MAAZ,QAA0B,gBAA1B;;AAEA,MAAMC,cAAc,GAAG,MAAM;AAC3B,SAAOD,MAAM,CAACE,KAAP,CACLH,CAAC,CAACI,GAAF,CACAJ,CAAC,CAACK,QAAF,CACAL,CAAC,CAACM,KAAF,CAAQ,aAAR,CADA,EAEE;AAAEC,IAAAA,IAAI,EAAE;AAAR,GAFF,CADA,EAKAP,CAAC,CAACQ,MAAF,CAASC,CAAC,IAAIT,CAAC,CAACU,GAAF,CAAMD,CAAN,CAAd,CALA,CADK,CAAP;AASD,CAVD;;AAYA,MAAME,aAAa,GAAGC,IAAI,IAAI;AAC5B,SAAOX,MAAM,CAACE,KAAP,CAAaH,CAAC,CAACa,MAAF,CAASb,CAAC,CAACc,UAAF,CAAa,UAAb,CAAT,EAAkC;AAAEF,IAAAA;AAAF,GAAlC,CAAb,CAAP;AACD,CAFD;;AAIA,eAAe,eAAeG,OAAf,CAAuBC,GAAvB,EAA4BC,GAA5B,EAAiC;AAC9C,MAAGD,GAAG,CAACE,MAAJ,KAAe,MAAlB,EAAyB;AACxB,UAAMC,OAAO,GAAG,MAAMR,aAAa,CAACK,GAAG,CAACI,IAAL,CAAnC;AACAH,IAAAA,GAAG,CAACI,IAAJ,CAASF,OAAT;AACA,GAHD,MAGK;AACL,UAAMG,QAAQ,GAAG,MAAMpB,cAAc,EAArC;AACAe,IAAAA,GAAG,CAACM,IAAJ,CAASD,QAAT;AACD;AACA","sourcesContent":["import { q, client } from '../../utils/db'\r\n\r\nconst getAllContacts = () => {\r\n  return client.query(\r\n    q.Map(\r\n    q.Paginate(\r\n    q.Match('allContacts'),\r\n      { size: 1 }\r\n     ),\r\n    q.Lambda(x => q.Get(x))\r\n   )\r\n )\r\n}\r\n\r\nconst createContact = data => {\r\n  return client.query(q.Create(q.Collection('contacts'),{ data }))\r\n}\r\n\r\nexport default async function handler(req, res) {\r\n  if(req.method === 'POST'){\r\n   const contact = await createContact(req.body)\r\n   res.send(contact)\r\n  }else{\r\n  const contacts = await getAllContacts()\r\n  res.json(contacts)\r\n}\r\n}"]},"metadata":{},"sourceType":"module"}